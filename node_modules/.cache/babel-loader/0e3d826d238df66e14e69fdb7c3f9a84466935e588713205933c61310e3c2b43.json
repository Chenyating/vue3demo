{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport { on } from 'element-ui/src/utils/dom';\nconst nodeList = [];\nconst ctx = '@@clickoutsideContext';\nlet startClick;\nlet seed = 0;\n!Vue.prototype.$isServer && on(document, 'mousedown', e => startClick = e);\n!Vue.prototype.$isServer && on(document, 'mouseup', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\nfunction createDocumentHandler(el, binding, vnode) {\n  return function (mouseup = {}, mousedown = {}) {\n    if (!vnode || !vnode.context || !mouseup.target || !mousedown.target || el.contains(mouseup.target) || el.contains(mousedown.target) || el === mouseup.target || vnode.context.popperElm && (vnode.context.popperElm.contains(mouseup.target) || vnode.context.popperElm.contains(mousedown.target))) return;\n    if (binding.expression && el[ctx].methodName && vnode.context[el[ctx].methodName]) {\n      vnode.context[el[ctx].methodName]();\n    } else {\n      el[ctx].bindingFn && el[ctx].bindingFn();\n    }\n  };\n}\n\n/**\n * v-clickoutside\n * @desc 点击元素外面才会触发的事件\n * @example\n * ```vue\n * <div v-element-clickoutside=\"handleClose\">\n * ```\n */\nexport default {\n  bind(el, binding, vnode) {\n    nodeList.push(el);\n    const id = seed++;\n    el[ctx] = {\n      id,\n      documentHandler: createDocumentHandler(el, binding, vnode),\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n  update(el, binding, vnode) {\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n  unbind(el) {\n    let len = nodeList.length;\n    for (let i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n    delete el[ctx];\n  }\n};","map":{"version":3,"names":["Vue","on","nodeList","ctx","startClick","seed","prototype","$isServer","document","e","forEach","node","documentHandler","createDocumentHandler","el","binding","vnode","mouseup","mousedown","context","target","contains","popperElm","expression","methodName","bindingFn","bind","push","id","value","update","unbind","len","length","i","splice"],"sources":["/Users/myproject/vuedemo/node_modules/element-ui/src/utils/clickoutside.js"],"sourcesContent":["import Vue from 'vue';\nimport { on } from 'element-ui/src/utils/dom';\n\nconst nodeList = [];\nconst ctx = '@@clickoutsideContext';\n\nlet startClick;\nlet seed = 0;\n\n!Vue.prototype.$isServer && on(document, 'mousedown', e => (startClick = e));\n\n!Vue.prototype.$isServer && on(document, 'mouseup', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\nfunction createDocumentHandler(el, binding, vnode) {\n  return function(mouseup = {}, mousedown = {}) {\n    if (!vnode ||\n      !vnode.context ||\n      !mouseup.target ||\n      !mousedown.target ||\n      el.contains(mouseup.target) ||\n      el.contains(mousedown.target) ||\n      el === mouseup.target ||\n      (vnode.context.popperElm &&\n      (vnode.context.popperElm.contains(mouseup.target) ||\n      vnode.context.popperElm.contains(mousedown.target)))) return;\n\n    if (binding.expression &&\n      el[ctx].methodName &&\n      vnode.context[el[ctx].methodName]) {\n      vnode.context[el[ctx].methodName]();\n    } else {\n      el[ctx].bindingFn && el[ctx].bindingFn();\n    }\n  };\n}\n\n/**\n * v-clickoutside\n * @desc 点击元素外面才会触发的事件\n * @example\n * ```vue\n * <div v-element-clickoutside=\"handleClose\">\n * ```\n */\nexport default {\n  bind(el, binding, vnode) {\n    nodeList.push(el);\n    const id = seed++;\n    el[ctx] = {\n      id,\n      documentHandler: createDocumentHandler(el, binding, vnode),\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n\n  update(el, binding, vnode) {\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n\n  unbind(el) {\n    let len = nodeList.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n    delete el[ctx];\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}