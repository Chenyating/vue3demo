{"ast":null,"code":"import { defineStore, createPinia } from 'pinia';\n\n// 创建一个 Pinia store\nconst pinia = createPinia();\nexport const cubeCacheStore = defineStore('cubeCache', {\n  state: () => ({\n    cacheData: {} // 用于存储缓存数据\n  }),\n\n  actions: {\n    // 生成唯一缓存key\n    getCacheKey() {\n      // 返回一个唯一的缓存key，你可以使用更复杂的逻辑生成\n      return Math.random().toString(36).substring(7);\n    },\n    set(cacheKey, cacheInfo) {\n      if (!this.caches[cacheKey]) {\n        this.caches[cacheKey] = {\n          version: 0,\n          data: cacheInfo\n        };\n      } else {\n        const currentCache = this.caches[cacheKey];\n        if (currentCache.data !== cacheInfo) {\n          currentCache.version++;\n          currentCache.data = cacheInfo;\n        }\n      }\n      this.autoSave(cacheKey);\n    },\n    autoSave(cacheKey, time = 0) {\n      if (time > 0) {\n        // Schedule an auto-save with a time delay\n        setTimeout(() => {\n          this.set(cacheKey, this.caches[cacheKey].data);\n          this.autoSave(cacheKey, time);\n        }, time);\n      }\n    },\n    cancelAutoSave(cacheKey) {\n      // Cancel auto-save for a cache\n      clearTimeout(this.caches[cacheKey].timer);\n      this.caches[cacheKey].timer = null;\n    },\n    clear(cacheKey) {\n      if (this.caches[cacheKey]) {\n        delete this.caches[cacheKey];\n      }\n    },\n    getAllCaches() {\n      return this.caches;\n    }\n  }\n});","map":{"version":3,"names":["defineStore","createPinia","pinia","cubeCacheStore","state","cacheData","actions","getCacheKey","Math","random","toString","substring","set","cacheKey","cacheInfo","caches","version","data","currentCache","autoSave","time","setTimeout","cancelAutoSave","clearTimeout","timer","clear","getAllCaches"],"sources":["/Users/myproject/vuedemo/src/store/index.js"],"sourcesContent":["import { defineStore, createPinia } from 'pinia';\n\n// 创建一个 Pinia store\nconst pinia = createPinia();\n\nexport const cubeCacheStore = defineStore('cubeCache', {\n  state: () => ({\n    cacheData: {}, // 用于存储缓存数据\n  }),\n\n  actions: {\n    // 生成唯一缓存key\n    getCacheKey() {\n      // 返回一个唯一的缓存key，你可以使用更复杂的逻辑生成\n      return Math.random().toString(36).substring(7);\n    },\n    set(cacheKey, cacheInfo) {\n      if (!this.caches[cacheKey]) {\n        this.caches[cacheKey] = { version: 0, data: cacheInfo };\n      } else {\n        const currentCache = this.caches[cacheKey];\n        if (currentCache.data !== cacheInfo) {\n          currentCache.version++;\n          currentCache.data = cacheInfo;\n        }\n      }\n      this.autoSave(cacheKey);\n    },\n    autoSave(cacheKey, time = 0) {\n      if (time > 0) {\n        // Schedule an auto-save with a time delay\n        setTimeout(() => {\n          this.set(cacheKey, this.caches[cacheKey].data);\n          this.autoSave(cacheKey, time);\n        }, time);\n      }\n    },\n    cancelAutoSave(cacheKey) {\n      // Cancel auto-save for a cache\n      clearTimeout(this.caches[cacheKey].timer);\n      this.caches[cacheKey].timer = null;\n    },\n    clear(cacheKey) {\n      if (this.caches[cacheKey]) {\n        delete this.caches[cacheKey];\n      }\n    },\n    getAllCaches() {\n      return this.caches;\n    },\n  },\n});\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,WAAW,QAAQ,OAAO;;AAEhD;AACA,MAAMC,KAAK,GAAGD,WAAW,CAAC,CAAC;AAE3B,OAAO,MAAME,cAAc,GAAGH,WAAW,CAAC,WAAW,EAAE;EACrDI,KAAK,EAAEA,CAAA,MAAO;IACZC,SAAS,EAAE,CAAC,CAAC,CAAE;EACjB,CAAC,CAAC;;EAEFC,OAAO,EAAE;IACP;IACAC,WAAWA,CAAA,EAAG;MACZ;MACA,OAAOC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,CAAC;IAChD,CAAC;IACDC,GAAGA,CAACC,QAAQ,EAAEC,SAAS,EAAE;MACvB,IAAI,CAAC,IAAI,CAACC,MAAM,CAACF,QAAQ,CAAC,EAAE;QAC1B,IAAI,CAACE,MAAM,CAACF,QAAQ,CAAC,GAAG;UAAEG,OAAO,EAAE,CAAC;UAAEC,IAAI,EAAEH;QAAU,CAAC;MACzD,CAAC,MAAM;QACL,MAAMI,YAAY,GAAG,IAAI,CAACH,MAAM,CAACF,QAAQ,CAAC;QAC1C,IAAIK,YAAY,CAACD,IAAI,KAAKH,SAAS,EAAE;UACnCI,YAAY,CAACF,OAAO,EAAE;UACtBE,YAAY,CAACD,IAAI,GAAGH,SAAS;QAC/B;MACF;MACA,IAAI,CAACK,QAAQ,CAACN,QAAQ,CAAC;IACzB,CAAC;IACDM,QAAQA,CAACN,QAAQ,EAAEO,IAAI,GAAG,CAAC,EAAE;MAC3B,IAAIA,IAAI,GAAG,CAAC,EAAE;QACZ;QACAC,UAAU,CAAC,MAAM;UACf,IAAI,CAACT,GAAG,CAACC,QAAQ,EAAE,IAAI,CAACE,MAAM,CAACF,QAAQ,CAAC,CAACI,IAAI,CAAC;UAC9C,IAAI,CAACE,QAAQ,CAACN,QAAQ,EAAEO,IAAI,CAAC;QAC/B,CAAC,EAAEA,IAAI,CAAC;MACV;IACF,CAAC;IACDE,cAAcA,CAACT,QAAQ,EAAE;MACvB;MACAU,YAAY,CAAC,IAAI,CAACR,MAAM,CAACF,QAAQ,CAAC,CAACW,KAAK,CAAC;MACzC,IAAI,CAACT,MAAM,CAACF,QAAQ,CAAC,CAACW,KAAK,GAAG,IAAI;IACpC,CAAC;IACDC,KAAKA,CAACZ,QAAQ,EAAE;MACd,IAAI,IAAI,CAACE,MAAM,CAACF,QAAQ,CAAC,EAAE;QACzB,OAAO,IAAI,CAACE,MAAM,CAACF,QAAQ,CAAC;MAC9B;IACF,CAAC;IACDa,YAAYA,CAAA,EAAG;MACb,OAAO,IAAI,CAACX,MAAM;IACpB;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}