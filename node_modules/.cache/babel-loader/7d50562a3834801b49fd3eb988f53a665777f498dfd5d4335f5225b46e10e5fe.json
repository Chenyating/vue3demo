{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nexport const tagsMixins = {\n  methods: {\n    // 页签\n    setVisitedView(arr) {\n      this.$emit('setVisitedView', arr);\n    },\n    // 页签缓存\n    setCachedViews(arr) {\n      this.$emit('setCachedViews', arr);\n    },\n    // 设置matched属性不可枚举\n    matchedViews() {\n      this.visitedViews.forEach((item, index) => {\n        item.matched && Object.defineProperty(item, 'matched', {\n          enumerable: false\n        });\n        if (item.meta.affix && index !== 0) {\n          this.visitedViews.splice(index, 1);\n        }\n      });\n    },\n    // 新增页签\n    addVisitedTag(tag) {\n      const {\n        name\n      } = tag;\n      this.addCachedTag(tag);\n      if (name) {\n        const temp = {\n          fullPath: tag.fullPath,\n          meta: {\n            title: 'noName',\n            ...tag.meta\n          },\n          // name: tag.name,\n          params: tag.params,\n          path: tag.path,\n          query: tag.query\n        };\n        if (this.visitedViews.some(v => v.fullPath === temp.fullPath)) return;\n        this.visitedViews[temp.meta.affix ? 'unshift' : 'push'](Object.assign({}, temp, {\n          title: temp.meta.title || 'noName'\n        }));\n        this.matchedViews();\n        this.setVisitedView(this.visitedViews);\n      }\n    },\n    // 新增页签缓存\n    addCachedTag(tag) {\n      if (this.cachedViews.includes(tag.path) || tag.path.indexOf('redirect') !== -1) return;\n      if (!tag.meta.noCache) {\n        this.cachedViews.push(tag.path);\n      }\n      this.setCachedViews(this.cachedViews);\n    },\n    // 关闭页签\n    deleteVisitedTag(tag) {\n      return new Promise(resolve => {\n        const index = this.visitedViews.findIndex(item => item.fullPath === tag.fullPath);\n        if (index < 0) return;\n        this.visitedViews.splice(index, 1);\n        resolve(this.visitedViews);\n        this.setVisitedView(this.visitedViews);\n        this.deleteCachedTag(tag);\n      });\n    },\n    // 关闭页签缓存\n    deleteCachedTag(tag) {\n      return new Promise(resolve => {\n        for (const i of this.cachedViews) {\n          if (i === tag.path) {\n            const index = this.cachedViews.indexOf(i);\n            this.cachedViews.splice(index, 1);\n            break;\n          }\n        }\n        resolve();\n        this.setCachedViews(this.cachedViews);\n      });\n    },\n    // 关闭其他页签\n    deleteOthersVisitedTags(tag) {\n      return new Promise(resolve => {\n        const arr = this.visitedViews.filter(v => {\n          return v.meta.affix || v.fullPath === tag.fullPath;\n        });\n        this.matchedViews();\n        resolve();\n        this.setVisitedView(arr);\n        this.deleteOthersCachedTags(tag);\n      });\n    },\n    // 关闭其他页签缓存\n    deleteOthersCachedTags(tag) {\n      const view = this.cachedViews.find(item => item === tag.fullPath);\n      const arr = [view];\n      this.setCachedViews(arr);\n    },\n    // 关闭全部页签\n    deleteAllVisitedTags() {\n      return new Promise(resolve => {\n        const arr = this.visitedViews.filter(tag => tag.meta.affix);\n        resolve(arr);\n        this.setVisitedView(arr);\n        this.deleteAllCachedTags();\n      });\n    },\n    // 关闭全部页签缓存\n    deleteAllCachedTags() {\n      this.setCachedViews([]);\n    },\n    // 关闭左侧页签\n    deleteLeftVisitedTags(tag) {\n      const index = this.visitedViews.findIndex(item => item.fullPath === tag.fullPath);\n      const arr = this.visitedViews.slice(index, this.visitedViews.length);\n      arr.unshift(this.visitedViews[0]);\n      this.setVisitedView(arr);\n      this.deleteLeftCachedTags(tag);\n    },\n    // 关闭左侧页签缓存\n    deleteLeftCachedTags() {\n      const arr = this.cachedViews.map(item => this.visitedViews.find(s => s.fullPath === item)).filter(item => item);\n      this.setCachedViews(arr);\n    },\n    // 关闭右侧页签\n    deleteRightVisitedTags(tag) {\n      return new Promise(resolve => {\n        const index = this.visitedViews.findIndex(item => item.fullPath === tag.fullPath);\n        const arr = this.visitedViews.slice(0, index + 1);\n        resolve(arr);\n        this.setVisitedView(arr);\n        this.deleteRightCachedTags(tag);\n      });\n    },\n    // 关闭右侧页签缓存\n    deleteRightCachedTags() {\n      const arr = this.cachedViews.map(item => this.visitedViews.find(s => s.fullPath === item)).filter(item => item);\n      this.setCachedViews(arr);\n    }\n  }\n};","map":{"version":3,"names":["tagsMixins","methods","setVisitedView","arr","$emit","setCachedViews","matchedViews","visitedViews","forEach","item","index","matched","Object","defineProperty","enumerable","meta","affix","splice","addVisitedTag","tag","name","addCachedTag","temp","fullPath","title","params","path","query","some","v","assign","cachedViews","includes","indexOf","noCache","push","deleteVisitedTag","Promise","resolve","findIndex","deleteCachedTag","i","deleteOthersVisitedTags","filter","deleteOthersCachedTags","view","find","deleteAllVisitedTags","deleteAllCachedTags","deleteLeftVisitedTags","slice","length","unshift","deleteLeftCachedTags","map","s","deleteRightVisitedTags","deleteRightCachedTags"],"sources":["/Users/myproject/vuedemo/node_modules/@cndinfo/cube-design-web/src/components/Navbar/src/components/TagsView/tagsMixins.js"],"sourcesContent":["export const tagsMixins = {\n  methods: {\n    // 页签\n    setVisitedView(arr) {\n      this.$emit('setVisitedView', arr)\n    },\n    // 页签缓存\n    setCachedViews(arr) {\n      this.$emit('setCachedViews', arr)\n    },\n    // 设置matched属性不可枚举\n    matchedViews() {\n      this.visitedViews.forEach((item, index) => {\n        item.matched && Object.defineProperty(item, 'matched', { enumerable: false })\n        if (item.meta.affix && index !== 0) {\n          this.visitedViews.splice(index, 1)\n        }\n      })\n    },\n    // 新增页签\n    addVisitedTag(tag) {\n      const { name } = tag\n      this.addCachedTag(tag)\n      if (name) {\n        const temp = {\n          fullPath: tag.fullPath,\n          meta: {\n            title: 'noName',\n            ...tag.meta\n          },\n          // name: tag.name,\n          params: tag.params,\n          path: tag.path,\n          query: tag.query\n        }\n        if (this.visitedViews.some((v) => v.fullPath === temp.fullPath)) return\n        this.visitedViews[temp.meta.affix ? 'unshift' : 'push'](\n          Object.assign({}, temp, {\n            title: temp.meta.title || 'noName'\n          })\n        )\n        this.matchedViews()\n        this.setVisitedView(this.visitedViews)\n      }\n    },\n    // 新增页签缓存\n    addCachedTag(tag) {\n      if (this.cachedViews.includes(tag.path) || tag.path.indexOf('redirect') !== -1) return\n      if (!tag.meta.noCache) {\n        this.cachedViews.push(tag.path)\n      }\n      this.setCachedViews(this.cachedViews)\n    },\n    // 关闭页签\n    deleteVisitedTag(tag) {\n      return new Promise(resolve => {\n        const index = this.visitedViews.findIndex(item => item.fullPath === tag.fullPath)\n        if (index < 0) return\n        this.visitedViews.splice(index, 1)\n        resolve(this.visitedViews)\n        this.setVisitedView(this.visitedViews)\n        this.deleteCachedTag(tag)\n      })\n    },\n    // 关闭页签缓存\n    deleteCachedTag(tag) {\n      return new Promise(resolve => {\n        for (const i of this.cachedViews) {\n          if (i === tag.path) {\n            const index = this.cachedViews.indexOf(i)\n            this.cachedViews.splice(index, 1)\n            break\n          }\n        }\n        resolve()\n        this.setCachedViews(this.cachedViews)\n      })\n    },\n    // 关闭其他页签\n    deleteOthersVisitedTags(tag) {\n      return new Promise(resolve => {\n        const arr = this.visitedViews.filter(v => {\n          return v.meta.affix || v.fullPath === tag.fullPath\n        })\n        this.matchedViews()\n        resolve()\n        this.setVisitedView(arr)\n        this.deleteOthersCachedTags(tag)\n      })\n    },\n    // 关闭其他页签缓存\n    deleteOthersCachedTags(tag) {\n      const view = this.cachedViews.find(item => item === tag.fullPath)\n      const arr = [view]\n      this.setCachedViews(arr)\n    },\n    // 关闭全部页签\n    deleteAllVisitedTags() {\n      return new Promise(resolve => {\n        const arr = this.visitedViews.filter((tag) => tag.meta.affix)\n        resolve(arr)\n        this.setVisitedView(arr)\n        this.deleteAllCachedTags()\n      })\n    },\n    // 关闭全部页签缓存\n    deleteAllCachedTags() {\n      this.setCachedViews([])\n    },\n    // 关闭左侧页签\n    deleteLeftVisitedTags(tag) {\n      const index = this.visitedViews.findIndex(item => item.fullPath === tag.fullPath)\n      const arr = this.visitedViews.slice(index, this.visitedViews.length)\n      arr.unshift(this.visitedViews[0])\n      this.setVisitedView(arr)\n      this.deleteLeftCachedTags(tag)\n    },\n    // 关闭左侧页签缓存\n    deleteLeftCachedTags() {\n      const arr = this.cachedViews.map(item => this.visitedViews.find(s => s.fullPath === item)).filter(item => item)\n      this.setCachedViews(arr)\n    },\n    // 关闭右侧页签\n    deleteRightVisitedTags(tag) {\n      return new Promise(resolve => {\n        const index = this.visitedViews.findIndex(item => item.fullPath === tag.fullPath)\n        const arr = this.visitedViews.slice(0, index + 1)\n        resolve(arr)\n        this.setVisitedView(arr)\n        this.deleteRightCachedTags(tag)\n      })\n    },\n    // 关闭右侧页签缓存\n    deleteRightCachedTags() {\n      const arr = this.cachedViews.map(item => this.visitedViews.find(s => s.fullPath === item)).filter(item => item)\n      this.setCachedViews(arr)\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}