{"ast":null,"code":"import { Form } from 'element-ui';\nexport default {\n  name: 'Form',\n  components: {\n    ElForm: Form\n  },\n  provide() {\n    return {\n      cndForm: this,\n      cubeForm: this\n    };\n  },\n  props: {\n    refForm: {\n      type: String,\n      default: ''\n    },\n    // 表单数据对象\n    model: {\n      type: Object,\n      default: () => {}\n    },\n    // 表单验证规则\n    rules: {\n      type: Object,\n      default: () => {}\n    },\n    labelWidth: {\n      type: String,\n      default: '100px'\n    },\n    size: {\n      type: String,\n      default: 'small'\n    },\n    inline: {\n      type: Boolean,\n      default: false\n    },\n    labelPosition: {\n      type: String,\n      default: 'right'\n    },\n    disabled: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      markId: ''\n    };\n  },\n  computed: {\n    // 表单类名\n    formClass() {\n      return `el-form-w${this.labelWidth.substr(0, this.labelWidth.length - 2)}`;\n    }\n  },\n  watch: {\n    disabled(nv, ov) {\n      // console.log('nv--', nv)\n      this.setDisabledItem(false);\n    }\n  },\n  created() {\n    // 设置独有id\n    this.markId = 'cubeForm' + new Date().getTime() + Math.ceil(Math.random() * 10000);\n    // this.markId = 'cndForm' + (new Date().getTime()) + Math.ceil(Math.random() * 10000)\n  },\n\n  mounted() {\n    this.setDisabledItem(true);\n  },\n  methods: {\n    // 设置禁用表单\n    setDisabledItem(flagInit) {\n      const curForm = document.getElementById(this.markId);\n      const inputList = curForm.getElementsByClassName('el-input__inner');\n      // console.log('父设置--', curForm)\n      // console.log('inputList--', inputList)\n      if (!flagInit) this.resetDisabled(inputList);\n      // 按顺序禁用\n      this.disabled.forEach(item => {\n        if (!isNaN(Number(item))) {\n          inputList[Number(item) - 1].parentNode.classList.add('is-disabled');\n          inputList[Number(item) - 1].setAttribute('disabled', true);\n        }\n      });\n    },\n    // 重置【数字顺序】禁用项\n    resetDisabled(domList) {\n      // console.log('父重置')\n      domList.forEach(item => {\n        item.parentNode.classList.remove('is-disabled');\n        item.removeAttribute('disabled');\n      });\n    }\n  }\n};","map":{"version":3,"names":["Form","name","components","ElForm","provide","cndForm","cubeForm","props","refForm","type","String","default","model","Object","rules","labelWidth","size","inline","Boolean","labelPosition","disabled","Array","data","markId","computed","formClass","substr","length","watch","nv","ov","setDisabledItem","created","Date","getTime","Math","ceil","random","mounted","methods","flagInit","curForm","document","getElementById","inputList","getElementsByClassName","resetDisabled","forEach","item","isNaN","Number","parentNode","classList","add","setAttribute","domList","remove","removeAttribute"],"sources":["node_modules/@cndinfo/cube-design-web/src/components/Form/src/index.vue"],"sourcesContent":["<template>\n  <el-form\n    :id=\"markId\"\n    :ref=\"refForm\"\n    :model=\"model\"\n    :class=\"formClass\"\n    :label-width=\"labelWidth\"\n    :rules=\"rules\"\n    :inline=\"inline\"\n    :size=\"size\"\n    :label-position=\"labelPosition\"\n  >\n    <slot />\n  </el-form>\n</template>\n\n<script>\nimport { Form } from 'element-ui'\nexport default {\n  name: 'Form',\n  components: {\n    ElForm: Form\n  },\n  provide() {\n    return {\n      cndForm: this,\n      cubeForm: this\n    }\n  },\n  props: {\n    refForm: {\n      type: String,\n      default: ''\n    },\n    // 表单数据对象\n    model: {\n      type: Object,\n      default: () => {}\n    },\n    // 表单验证规则\n    rules: {\n      type: Object,\n      default: () => {}\n    },\n    labelWidth: {\n      type: String,\n      default: '100px'\n    },\n    size: {\n      type: String,\n      default: 'small'\n    },\n    inline: {\n      type: Boolean,\n      default: false\n    },\n    labelPosition: {\n      type: String,\n      default: 'right'\n    },\n    disabled: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      markId: ''\n    }\n  },\n  computed: {\n    // 表单类名\n    formClass() {\n      return `el-form-w${this.labelWidth.substr(0, this.labelWidth.length - 2)}`\n    }\n  },\n  watch: {\n    disabled(nv, ov) {\n      // console.log('nv--', nv)\n      this.setDisabledItem(false)\n    }\n  },\n  created() {\n    // 设置独有id\n    this.markId = 'cubeForm' + (new Date().getTime()) + Math.ceil(Math.random() * 10000)\n    // this.markId = 'cndForm' + (new Date().getTime()) + Math.ceil(Math.random() * 10000)\n  },\n  mounted() {\n    this.setDisabledItem(true)\n  },\n  methods: {\n    // 设置禁用表单\n    setDisabledItem(flagInit) {\n      const curForm = document.getElementById(this.markId)\n      const inputList = curForm.getElementsByClassName('el-input__inner')\n      // console.log('父设置--', curForm)\n      // console.log('inputList--', inputList)\n      if (!flagInit) this.resetDisabled(inputList)\n      // 按顺序禁用\n      this.disabled.forEach(item => {\n        if (!isNaN(Number(item))) {\n          inputList[Number(item) - 1].parentNode.classList.add('is-disabled')\n          inputList[Number(item) - 1].setAttribute('disabled', true)\n        }\n      })\n    },\n    // 重置【数字顺序】禁用项\n    resetDisabled(domList) {\n      // console.log('父重置')\n      domList.forEach(item => {\n        item.parentNode.classList.remove('is-disabled')\n        item.removeAttribute('disabled')\n      })\n    }\n  }\n}\n\n</script>\n"],"mappings":"AAiBA,SAAAA,IAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAC,MAAA,EAAAH;EACA;EACAI,QAAA;IACA;MACAC,OAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA,EAAAA,CAAA;IACA;IACA;IACAG,KAAA;MACAL,IAAA,EAAAI,MAAA;MACAF,OAAA,EAAAA,CAAA;IACA;IACAI,UAAA;MACAN,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAK,IAAA;MACAP,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAM,MAAA;MACAR,IAAA,EAAAS,OAAA;MACAP,OAAA;IACA;IACAQ,aAAA;MACAV,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAS,QAAA;MACAX,IAAA,EAAAY,KAAA;MACAV,OAAA,EAAAA,CAAA;IACA;EACA;EACAW,KAAA;IACA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA;IACAC,UAAA;MACA,wBAAAV,UAAA,CAAAW,MAAA,SAAAX,UAAA,CAAAY,MAAA;IACA;EACA;EACAC,KAAA;IACAR,SAAAS,EAAA,EAAAC,EAAA;MACA;MACA,KAAAC,eAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAT,MAAA,oBAAAU,IAAA,GAAAC,OAAA,KAAAC,IAAA,CAAAC,IAAA,CAAAD,IAAA,CAAAE,MAAA;IACA;EACA;;EACAC,QAAA;IACA,KAAAP,eAAA;EACA;EACAQ,OAAA;IACA;IACAR,gBAAAS,QAAA;MACA,MAAAC,OAAA,GAAAC,QAAA,CAAAC,cAAA,MAAApB,MAAA;MACA,MAAAqB,SAAA,GAAAH,OAAA,CAAAI,sBAAA;MACA;MACA;MACA,KAAAL,QAAA,OAAAM,aAAA,CAAAF,SAAA;MACA;MACA,KAAAxB,QAAA,CAAA2B,OAAA,CAAAC,IAAA;QACA,KAAAC,KAAA,CAAAC,MAAA,CAAAF,IAAA;UACAJ,SAAA,CAAAM,MAAA,CAAAF,IAAA,OAAAG,UAAA,CAAAC,SAAA,CAAAC,GAAA;UACAT,SAAA,CAAAM,MAAA,CAAAF,IAAA,OAAAM,YAAA;QACA;MACA;IACA;IACA;IACAR,cAAAS,OAAA;MACA;MACAA,OAAA,CAAAR,OAAA,CAAAC,IAAA;QACAA,IAAA,CAAAG,UAAA,CAAAC,SAAA,CAAAI,MAAA;QACAR,IAAA,CAAAS,eAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}