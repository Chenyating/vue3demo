{"ast":null,"code":"import { cubeCacheStore } from '../store/index.js';\nexport default {\n  data() {\n    return {\n      form: {\n        name: '',\n        year: ''\n      },\n      cubeCache: cubeCacheStore()\n    };\n  },\n  methods: {\n    onSubmit() {\n      var key = this.$route.query.cacheKey;\n      if (key) {\n        // 复制 this.form 的值\n        const formCopy = {\n          ...this.form\n        };\n        console.log(this.cubeCache.getAll());\n        this.cubeCache.set(key, formCopy);\n      } else {\n        console.error(\"缺少 cacheKey 参数\");\n      }\n    }\n  },\n  computed: {\n    cacheObj() {\n      return this.cubeCache.get(this.$route.query.cacheKey);\n    }\n  },\n  watch: {\n    $route(to, from) {\n      if (to.query.cacheKey) {\n        const data = this.cubeCache.get(to.query.cacheKey);\n        if (data) {\n          this.form = data;\n        } else {\n          // 如果没有缓存数据，可以设置表单字段为空或默认值\n          this.form = {\n            name: '',\n            year: ''\n          };\n        }\n      }\n    }\n  },\n  mounted() {}\n};","map":{"version":3,"names":["cubeCacheStore","data","form","name","year","cubeCache","methods","onSubmit","key","$route","query","cacheKey","formCopy","console","log","getAll","set","error","computed","cacheObj","get","watch","to","from","mounted"],"sources":["src/views/editview.vue"],"sourcesContent":["<template>\n  <div class=\"about\">\n        姓名<el-input v-model=\"form.name\"></el-input>\n        年龄<el-input v-model=\"form.year\"></el-input>\n        <el-button type=\"primary\" @click=\"onSubmit\">缓存</el-button>\n    <div>\n      cacheobj来自：cubeCache.get({{ $route.query.cacheKey }})<br />\n      cacheObj:{{ cacheObj }}<br />\n      <!-- cacheObj.allVersion:{{ cacheObj?.diff(0) }}<br /> -->\n      cacheObj:{{ cacheObj?.getAllVersion() }}<br />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { cubeCacheStore } from '../store/index.js'\n\nexport default {\n  data() {\n    return {\n      form: {\n        name: '',\n        year: '',\n      },\n      cubeCache: cubeCacheStore(),\n    }\n  },\n  methods: {\n    onSubmit() {\n      var key = this.$route.query.cacheKey;\n      if (key) {\n        // 复制 this.form 的值\n        const formCopy = { ...this.form };\n        console.log(this.cubeCache.getAll());\n        this.cubeCache.set(key, formCopy);\n      } else {\n        console.error(\"缺少 cacheKey 参数\");\n      }\n    },\n  },\n  computed: {\n    cacheObj() {\n      return this.cubeCache.get(this.$route.query.cacheKey)\n    },\n  },\n  watch: {\n    $route(to, from) {\n      if (to.query.cacheKey) {\n        const data = this.cubeCache.get(to.query.cacheKey)\n        if (data) {\n          this.form = data\n        } else {\n          // 如果没有缓存数据，可以设置表单字段为空或默认值\n          this.form = {\n            name: '',\n            year: '',\n          }\n        }\n      }\n    },\n  },\n  mounted() {},\n}\n</script>\n"],"mappings":"AAeA,SAAAA,cAAA;AAEA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,IAAA;QACAC,IAAA;MACA;MACAC,SAAA,EAAAL,cAAA;IACA;EACA;EACAM,OAAA;IACAC,SAAA;MACA,IAAAC,GAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,QAAA;MACA,IAAAH,GAAA;QACA;QACA,MAAAI,QAAA;UAAA,QAAAV;QAAA;QACAW,OAAA,CAAAC,GAAA,MAAAT,SAAA,CAAAU,MAAA;QACA,KAAAV,SAAA,CAAAW,GAAA,CAAAR,GAAA,EAAAI,QAAA;MACA;QACAC,OAAA,CAAAI,KAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,SAAA;MACA,YAAAd,SAAA,CAAAe,GAAA,MAAAX,MAAA,CAAAC,KAAA,CAAAC,QAAA;IACA;EACA;EACAU,KAAA;IACAZ,OAAAa,EAAA,EAAAC,IAAA;MACA,IAAAD,EAAA,CAAAZ,KAAA,CAAAC,QAAA;QACA,MAAAV,IAAA,QAAAI,SAAA,CAAAe,GAAA,CAAAE,EAAA,CAAAZ,KAAA,CAAAC,QAAA;QACA,IAAAV,IAAA;UACA,KAAAC,IAAA,GAAAD,IAAA;QACA;UACA;UACA,KAAAC,IAAA;YACAC,IAAA;YACAC,IAAA;UACA;QACA;MACA;IACA;EACA;EACAoB,QAAA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}