{"ast":null,"code":"export default {\n  name: 'HeaderMessage',\n  props: {\n    // 消息数据\n    messageList: {\n      type: Array,\n      default: () => []\n    },\n    // 消息数据\n    messageTotal: {\n      type: Number,\n      default: 0\n    },\n    // 用户信息\n    userInfo: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      popover: false\n    };\n  },\n  computed: {\n    messageTotal_() {\n      return this.messageTotal <= 99 ? this.messageTotal : '99+';\n    }\n  },\n  watch: {\n    popover(nv, ov) {\n      nv && this.$emit('setMessageList');\n    }\n  },\n  methods: {\n    toSendMassage(item = '') {\n      this.popover = false;\n      this.$emit('toSendMassage', item);\n    },\n    renderTime(date) {\n      if (!date) return '';\n      const _date = new Date(date).toJSON();\n      return new Date(+new Date(_date) + 8 * 3600 * 1000).toISOString().replace(/T/g, ' ').replace(/\\.[\\d]{3}Z/, '');\n    }\n  }\n};","map":{"version":3,"names":["name","props","messageList","type","Array","default","messageTotal","Number","userInfo","Object","data","popover","computed","messageTotal_","watch","nv","ov","$emit","methods","toSendMassage","item","renderTime","date","_date","Date","toJSON","toISOString","replace"],"sources":["node_modules/@cndinfo/cube-design-web/src/components/NavRightMenu/src/components/HeaderMessage/index.vue"],"sourcesContent":["<template>\n  <div class=\"header-message\">\n    <el-popover\n      v-model=\"popover\"\n      popper-class=\"header-message-popover\"\n      placement=\"bottom\"\n      width=\"250\"\n      trigger=\"click\"\n    >\n      <div v-if=\"messageTotal > 0\" class=\"message-banner\">\n        <h4>{{ $t('grid.others.latestNews') }}</h4>\n        <ul>\n          <li\n            v-for=\"(item, index) in messageList\"\n            :key=\"index\"\n            @click=\"toSendMassage(item)\"\n          >\n            <p>{{ item.sMsgTitle }}</p>\n            <span>{{\n              renderTime(item.sSendTime ? item.sSendTime : item.sCreateTime)\n            }}</span>\n          </li>\n        </ul>\n        <p class=\"view-all\" @click=\"toSendMassage()\">\n          {{ $t('login.viewAllInformation') }}\n        </p>\n      </div>\n      <div v-else class=\"no-message\">{{ $t('grid.others.noData') }}</div>\n      <template slot=\"reference\">\n        <div class=\"header-message-view flexCC\">\n          <cnd-icon name=\"cnd-remind\" />\n          <p v-if=\"messageTotal > 0\" class=\"message-total\">\n            <span>{{ messageTotal_ }}</span>\n          </p>\n        </div>\n      </template>\n    </el-popover>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HeaderMessage',\n  props: {\n    // 消息数据\n    messageList: {\n      type: Array,\n      default: () => []\n    },\n    // 消息数据\n    messageTotal: {\n      type: Number,\n      default: 0\n    },\n    // 用户信息\n    userInfo: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data() {\n    return {\n      popover: false\n    }\n  },\n  computed: {\n    messageTotal_() {\n      return this.messageTotal <= 99 ? this.messageTotal : '99+'\n    }\n  },\n  watch: {\n    popover(nv, ov) {\n      nv && this.$emit('setMessageList')\n    }\n  },\n  methods: {\n    toSendMassage(item = '') {\n      this.popover = false\n      this.$emit('toSendMassage', item)\n    },\n    renderTime(date) {\n      if (!date) return ''\n      const _date = new Date(date).toJSON()\n      return new Date(+new Date(_date) + 8 * 3600 * 1000)\n        .toISOString()\n        .replace(/T/g, ' ')\n        .replace(/\\.[\\d]{3}Z/, '')\n    }\n  }\n}\n</script>\n"],"mappings":"AAyCA;EACAA,IAAA;EACAC,KAAA;IACA;IACAC,WAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,OAAA,EAAAA,CAAA;IACA;IACA;IACAC,YAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACA;IACAG,QAAA;MACAL,IAAA,EAAAM,MAAA;MACAJ,OAAA,EAAAA,CAAA;QACA;MACA;IACA;EACA;EACAK,KAAA;IACA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACAC,cAAA;MACA,YAAAP,YAAA,cAAAA,YAAA;IACA;EACA;EACAQ,KAAA;IACAH,QAAAI,EAAA,EAAAC,EAAA;MACAD,EAAA,SAAAE,KAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAAC,IAAA;MACA,KAAAT,OAAA;MACA,KAAAM,KAAA,kBAAAG,IAAA;IACA;IACAC,WAAAC,IAAA;MACA,KAAAA,IAAA;MACA,MAAAC,KAAA,OAAAC,IAAA,CAAAF,IAAA,EAAAG,MAAA;MACA,WAAAD,IAAA,MAAAA,IAAA,CAAAD,KAAA,qBACAG,WAAA,GACAC,OAAA,YACAA,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}