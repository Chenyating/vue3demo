{"ast":null,"code":"import Vue from 'vue';\nimport VPopover from './index.vue';\nconst Popover = Vue.extend(VPopover);\nconst tooltip = {\n  bind(el, binding, vnode) {\n    // const random = Math.random()\n    const popper = new Popover({\n      el: document.createElement('div')\n    });\n    document.body.style.position = 'relative'; // 将body 设置相对定位\n    document.body.appendChild(popper.$el); //\n    el.instance = popper;\n    el.instance.content = binding.value.content || ''; // 气泡中的文字\n    // 浮层中的文字\n    const Component = Vue.extend({\n      template: `<div>${binding.value.content}</div>`\n    });\n    const instance = new Component();\n    instance.$mount();\n    el.instance.effect = binding.value.effect || 'dark'; // 气泡中的文字\n    let timer;\n    el.onmouseenter = () => {\n      timer = setTimeout(function () {\n        el.instance.visible = true;\n        Vue.nextTick(() => {\n          el.instance.$refs['ref-popover-detail-body'].innerHTML = '';\n          el.instance.$refs['ref-popover-detail-body'].appendChild(instance.$el);\n          const _top1 = el.getBoundingClientRect().top; // 获取元素距离 顶部位置\n          const _top2 = document.body.scrollTop || document.documentElement.scrollTop; // 获取滚动 高度\n          const _offsetTop = _top1 + _top2 + 4; // 距离顶部高度  ui 4px 间距\n          const _offsetLeft = el.getBoundingClientRect().left; // 距离右边 距离\n          const _offsetHeight = el.offsetHeight; // 绑定元素高度\n          const $popover = el.instance.$refs[`ref-popover`];\n          $popover.addEventListener('mouseenter', function () {\n            el.instance.visible = true;\n          });\n          $popover.addEventListener('mouseleave', function () {\n            el.instance.visible = false;\n          });\n          $popover.style.top = `${_offsetTop + _offsetHeight}px`;\n          $popover.style.left = `${_offsetLeft}px`;\n        });\n      }, 1500);\n    };\n    el.onmouseleave = event => {\n      var div = el.instance.$refs[`ref-popover`];\n      var x = event.clientX;\n      var y = event.clientY;\n      if (div?.offsetLeft && div?.offsetTop) {\n        var divx1 = div.offsetLeft;\n        var divy1 = div.offsetTop - 10;\n        var divx2 = div.offsetLeft + div.offsetWidth;\n        var divy2 = div.offsetTop + div.offsetHeight + 10;\n        if (x > divx1 && x < divx2 && y > divy1 && y < divy2) {\n          return false;\n        }\n        clearTimeout(timer);\n        el.instance.visible = false;\n      } else {\n        clearTimeout(timer);\n        el.instance.visible = false;\n      }\n    };\n  },\n  update() {},\n  unbind(el, binding) {\n    // 解除事件监听\n    el.instance && el.instance.$destroy();\n  }\n};\nexport default tooltip;","map":{"version":3,"names":["Vue","VPopover","Popover","extend","tooltip","bind","el","binding","vnode","popper","document","createElement","body","style","position","appendChild","$el","instance","content","value","Component","template","$mount","effect","timer","onmouseenter","setTimeout","visible","nextTick","$refs","innerHTML","_top1","getBoundingClientRect","top","_top2","scrollTop","documentElement","_offsetTop","_offsetLeft","left","_offsetHeight","offsetHeight","$popover","addEventListener","onmouseleave","event","div","x","clientX","y","clientY","offsetLeft","offsetTop","divx1","divy1","divx2","offsetWidth","divy2","clearTimeout","update","unbind","$destroy"],"sources":["/Users/myproject/vuedemo/node_modules/@cndinfo/cube-design-web/src/directives/tooltip/index.js"],"sourcesContent":["import Vue from 'vue'\n\nimport VPopover from './index.vue'\nconst Popover = Vue.extend(VPopover)\nconst tooltip = {\n  bind(el, binding, vnode) {\n    // const random = Math.random()\n    const popper = new Popover({\n      el: document.createElement('div')\n    })\n    document.body.style.position = 'relative' // 将body 设置相对定位\n    document.body.appendChild(popper.$el) //\n    el.instance = popper\n    el.instance.content = binding.value.content || ''// 气泡中的文字\n    // 浮层中的文字\n    const Component = Vue.extend({\n      template: `<div>${binding.value.content}</div>`\n    })\n    const instance = new Component()\n    instance.$mount()\n\n    el.instance.effect = binding.value.effect || 'dark'// 气泡中的文字\n    let timer\n    el.onmouseenter = () => {\n      timer = setTimeout(function() {\n        el.instance.visible = true\n        Vue.nextTick(() => {\n          el.instance.$refs['ref-popover-detail-body'].innerHTML = ''\n          el.instance.$refs['ref-popover-detail-body'].appendChild(instance.$el)\n          const _top1 = el.getBoundingClientRect().top // 获取元素距离 顶部位置\n          const _top2 = document.body.scrollTop || document.documentElement.scrollTop // 获取滚动 高度\n          const _offsetTop = _top1 + _top2 + 4 // 距离顶部高度  ui 4px 间距\n          const _offsetLeft = el.getBoundingClientRect().left // 距离右边 距离\n          const _offsetHeight = el.offsetHeight // 绑定元素高度\n          const $popover = el.instance.$refs[`ref-popover`]\n          $popover.addEventListener('mouseenter', function() {\n            el.instance.visible = true\n          })\n          $popover.addEventListener('mouseleave', function() {\n            el.instance.visible = false\n          })\n          $popover.style.top = `${_offsetTop + _offsetHeight}px`\n          $popover.style.left = `${_offsetLeft}px`\n        })\n      }, 1500)\n    }\n    el.onmouseleave = (event) => {\n      var div = el.instance.$refs[`ref-popover`]\n      var x = event.clientX\n      var y = event.clientY\n      if (div?.offsetLeft && div?.offsetTop) {\n        var divx1 = div.offsetLeft\n        var divy1 = div.offsetTop - 10\n        var divx2 = div.offsetLeft + div.offsetWidth\n        var divy2 = div.offsetTop + div.offsetHeight + 10\n        if (x > divx1 && x < divx2 && y > divy1 && y < divy2) {\n          return false\n        }\n        clearTimeout(timer)\n        el.instance.visible = false\n      } else {\n        clearTimeout(timer)\n        el.instance.visible = false\n      }\n    }\n  },\n  update() { },\n  unbind(el, binding) {\n    // 解除事件监听\n    el.instance && el.instance.$destroy()\n  }\n}\nexport default tooltip\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}