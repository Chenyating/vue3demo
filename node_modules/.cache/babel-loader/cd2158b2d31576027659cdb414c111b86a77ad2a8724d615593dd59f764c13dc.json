{"ast":null,"code":"import localDialog from '../../Dialog/index.js';\nexport default {\n  name: 'FRLogin',\n  components: {\n    localDialog\n  },\n  props: {\n    // 弹窗显隐\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: '帆软账号登录'\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      passwordType: 'password',\n      form: {\n        username: '',\n        password: ''\n      },\n      error: {\n        username: '请输入用户账号',\n        password: '请输入用户密码'\n      },\n      rules: {\n        username: [{\n          required: true,\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  watch: {\n    visible(val) {\n      if (!val) {\n        const origin = this.$options.data().form;\n        this.$set(this, 'form', origin);\n        this.$refs.form.resetFields();\n        this.loading = false;\n      }\n    }\n  },\n  methods: {\n    hideLoading() {\n      this.loading = false;\n    },\n    close() {\n      this.handleCancel();\n    },\n    showPwd(type) {\n      this[type] = this[type] === 'password' ? '' : 'password';\n      this.$nextTick(() => {\n        this.$refs[type] && this.$refs[type].focus();\n      });\n    },\n    handleCancel() {\n      this.$emit('cancel', true);\n      this.$emit('update:visible', false);\n      const origin = this.$options.data().form;\n      this.$set(this, 'form', origin);\n      this.$refs.form.resetFields();\n    },\n    handleLogin() {\n      this.loading = true;\n      this.$refs.form.validate().then(valid => {\n        if (valid) {\n          this.$emit('login', {\n            ...this.form\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["localDialog","name","components","props","visible","type","Boolean","default","title","String","data","loading","passwordType","form","username","password","error","rules","required","trigger","watch","val","origin","$options","$set","$refs","resetFields","methods","hideLoading","close","handleCancel","showPwd","$nextTick","focus","$emit","handleLogin","validate","then","valid"],"sources":["node_modules/@cndinfo/cube-design-web/src/components/FineReport/common/login.vue"],"sourcesContent":["<template>\n  <local-dialog :title=\"title\" :visible=\"visible\" :show-close=\"true\" :fullscreen=\"false\" :append-to-body=\"appendToBody\"\n    width=\"300px\" @close=\"close\">\n    <template slot=\"title\">\n      <div class=\"title-banner\">\n        <p>{{ title }}</p>\n        <span>用于打印</span>\n      </div>\n    </template>\n    <template slot=\"content\">\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\n        <cube-form-item prop=\"username\" label=\"账号\" :error-msg=\"error.username\" :custom-width=\"23\">\n          <el-input autocomplete=\"new-password\" placeholder=\"请输入账号\" ref=\"username\" v-model=\"form.username\"\n            @keyup.enter.native=\"handleLogin\" />\n        </cube-form-item>\n        <cube-form-item prop=\"password\" label=\"密码\" :error-msg=\"error.password\" :custom-width=\"23\">\n          <el-input autocomplete=\"new-password\" ref=\"password\" v-model=\"form.password\" name=\"password\"\n            :type=\"passwordType\" :placeholder=\"$t('grid.others.password')\" @keyup.enter.native=\"handleLogin\" />\n          <cnd-icon class=\"show-password\" :name=\"passwordType === 'password' ? 'cnd-eyes-close' : 'cnd-eyes'\n            \" @click=\"showPwd('passwordType')\" />\n        </cube-form-item>\n      </el-form>\n    </template>\n    <template slot=\"footer\">\n      <el-button :loading=\"loading\" class=\"login-button\" type=\"primary\" \n        @click.native.prevent=\"handleLogin\">\n        {{ $t('login.login') }}\n      </el-button>\n    </template>\n  </local-dialog>\n</template>\n<script>\nimport localDialog from '../../Dialog/index.js'\nexport default {\n  name: 'FRLogin',\n  components: { localDialog },\n  props: {\n    // 弹窗显隐\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: '帆软账号登录'\n    },\n\n  },\n  data () {\n    return {\n      loading:false,\n      passwordType: 'password',\n      form: {\n        username: '',\n        password: '',\n      },\n      error: {\n        username: '请输入用户账号',\n        password: '请输入用户密码',\n      },\n      rules: {\n        username: [\n          {\n            required: true,\n            trigger: 'blur',\n          }\n        ],\n        password: [\n          {\n            required: true,\n            trigger: 'blur',\n          }\n        ]\n\n      }\n    }\n  },\n  watch:{\n    visible(val){\n      if(!val){\n        const origin = this.$options.data().form\n        this.$set(this, 'form', origin)\n        this.$refs.form.resetFields()\n        this.loading = false\n      }\n    }\n  },\n  methods: {\n    hideLoading(){\n      this.loading = false\n    },\n    close () {\n      this.handleCancel()\n    },\n    showPwd (type) {\n      this[type] = this[type] === 'password' ? '' : 'password'\n      this.$nextTick(() => {\n        this.$refs[type] && this.$refs[type].focus()\n      })\n    },\n    handleCancel () {\n      this.$emit('cancel', true)\n      this.$emit('update:visible', false)\n      const origin = this.$options.data().form\n      this.$set(this, 'form', origin)\n      this.$refs.form.resetFields()\n    },\n    handleLogin () {\n      this.loading = true\n      this.$refs.form.validate().then((valid) => {\n        if (valid) {\n          this.$emit('login',{...this.form} )\n        }\n      })\n    },\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.title-banner {\n  p {\n    font-size: 28px;\n    color: #23262e;\n    letter-spacing: 0.5px;\n    line-height: 36px;\n    font-weight: 700;\n  }\n\n  span {\n    display: block;\n    margin: 11px 0 12px 0;\n    font-size: 16px;\n    line-height: 22px;\n    color: #686f80;\n    letter-spacing: 0.5px;\n  }\n}\n\n.login-button {\n  width: 100%;\n  height: 38px;\n  line-height: 24px;\n  padding: 0;\n  letter-spacing: 18px;\n  font-size: 18px;\n  font-weight: 400;\n\n  .el-icon-loading {\n    letter-spacing: normal\n  }\n}\n\n.show-password {\n  position: absolute;\n  right: 12px;\n  top: 0;\n  bottom: 0;\n  margin: auto !important;\n}\n</style>\n"],"mappings":"AAgCA,OAAAA,WAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;IACAC,OAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;EAEA;EACAG,KAAA;IACA;MACAC,OAAA;MACAC,YAAA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,QAAA;QACAC,QAAA;MACA;MACAE,KAAA;QACAH,QAAA,GACA;UACAI,QAAA;UACAC,OAAA;QACA,EACA;QACAJ,QAAA,GACA;UACAG,QAAA;UACAC,OAAA;QACA;MAGA;IACA;EACA;EACAC,KAAA;IACAhB,QAAAiB,GAAA;MACA,KAAAA,GAAA;QACA,MAAAC,MAAA,QAAAC,QAAA,CAAAb,IAAA,GAAAG,IAAA;QACA,KAAAW,IAAA,eAAAF,MAAA;QACA,KAAAG,KAAA,CAAAZ,IAAA,CAAAa,WAAA;QACA,KAAAf,OAAA;MACA;IACA;EACA;EACAgB,OAAA;IACAC,YAAA;MACA,KAAAjB,OAAA;IACA;IACAkB,MAAA;MACA,KAAAC,YAAA;IACA;IACAC,QAAA1B,IAAA;MACA,KAAAA,IAAA,SAAAA,IAAA;MACA,KAAA2B,SAAA;QACA,KAAAP,KAAA,CAAApB,IAAA,UAAAoB,KAAA,CAAApB,IAAA,EAAA4B,KAAA;MACA;IACA;IACAH,aAAA;MACA,KAAAI,KAAA;MACA,KAAAA,KAAA;MACA,MAAAZ,MAAA,QAAAC,QAAA,CAAAb,IAAA,GAAAG,IAAA;MACA,KAAAW,IAAA,eAAAF,MAAA;MACA,KAAAG,KAAA,CAAAZ,IAAA,CAAAa,WAAA;IACA;IACAS,YAAA;MACA,KAAAxB,OAAA;MACA,KAAAc,KAAA,CAAAZ,IAAA,CAAAuB,QAAA,GAAAC,IAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAJ,KAAA;YAAA,QAAArB;UAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}