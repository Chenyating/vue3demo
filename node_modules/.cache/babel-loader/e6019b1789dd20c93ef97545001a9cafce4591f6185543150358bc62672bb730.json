{"ast":null,"code":"import { RowNode } from 'ag-grid-community';\nexport default {\n  data() {\n    return {\n      agValue: undefined,\n      nextAgValue: undefined\n    };\n  },\n  watch: {\n    agValue() {\n      this.nextAgValue = this.agValue;\n    }\n  },\n  created() {\n    const {\n      node\n    } = this.params;\n    node.addEventListener(RowNode.EVENT_DATA_CHANGED, this.rowDataChange);\n    node.addEventListener(RowNode.EVENT_CELL_CHANGED, this.cellChange);\n  },\n  beforeDestroy() {\n    const {\n      node\n    } = this.params;\n    node.removeEventListener(RowNode.EVENT_DATA_CHANGED, this.rowDataChange);\n    node.removeEventListener(RowNode.EVENT_CELL_CHANGED, this.cellChange);\n  },\n  methods: {\n    // 供ag-grid调用，获取最后value\n    getValue() {\n      return this.nextAgValue;\n    },\n    rowDataChange({\n      newData\n    }) {\n      const {\n        column\n      } = this.params;\n      const {\n        colId\n      } = column;\n      this.agValue = newData[colId];\n    },\n    cellChange({\n      newValue,\n      column\n    }) {\n      if (column.colId === this.params.column.colId) {\n        this.agValue = newValue;\n      }\n    },\n    triggerBlur(e) {\n      const {\n        cellEditorComponentProps,\n        ...restAgParams\n      } = this.params || {};\n      const {\n        blur\n      } = cellEditorComponentProps || {};\n      blur?.({\n        event: e,\n        agParams: restAgParams\n      });\n    },\n    triggerFocus(e) {\n      const {\n        cellEditorComponentProps,\n        ...restAgParams\n      } = this.params || {};\n      const {\n        focus\n      } = cellEditorComponentProps || {};\n      focus?.({\n        event: e,\n        agParams: restAgParams\n      });\n    },\n    triggerKeyup(e) {\n      const {\n        cellEditorComponentProps,\n        ...restAgParams\n      } = this.params || {};\n      const {\n        keyup\n      } = cellEditorComponentProps || {};\n      keyup?.({\n        event: e,\n        agParams: restAgParams\n      });\n    },\n    triggerKeydown(e) {\n      const {\n        cellEditorComponentProps,\n        ...restAgParams\n      } = this.params || {};\n      const {\n        keydown\n      } = cellEditorComponentProps || {};\n      keydown?.({\n        event: e,\n        agParams: restAgParams\n      });\n    }\n  }\n};","map":{"version":3,"names":["RowNode","data","agValue","undefined","nextAgValue","watch","created","node","params","addEventListener","EVENT_DATA_CHANGED","rowDataChange","EVENT_CELL_CHANGED","cellChange","beforeDestroy","removeEventListener","methods","getValue","newData","column","colId","newValue","triggerBlur","e","cellEditorComponentProps","restAgParams","blur","event","agParams","triggerFocus","focus","triggerKeyup","keyup","triggerKeydown","keydown"],"sources":["/Users/myproject/vuedemo/node_modules/@cndinfo/cube-design-web/src/components/ForGridComponents/cell-editor/ag-editor-mixins.js"],"sourcesContent":["import { RowNode } from 'ag-grid-community'\n\nexport default {\n  data() {\n    return {\n      agValue: undefined,\n      nextAgValue: undefined\n    }\n  },\n  watch: {\n    agValue() {\n      this.nextAgValue = this.agValue\n    }\n  },\n  created() {\n    const { node } = this.params\n\n    node.addEventListener(RowNode.EVENT_DATA_CHANGED, this.rowDataChange)\n\n    node.addEventListener(RowNode.EVENT_CELL_CHANGED, this.cellChange)\n  },\n  beforeDestroy() {\n    const { node } = this.params\n\n    node.removeEventListener(RowNode.EVENT_DATA_CHANGED, this.rowDataChange)\n\n    node.removeEventListener(RowNode.EVENT_CELL_CHANGED, this.cellChange)\n  },\n  methods: {\n    // 供ag-grid调用，获取最后value\n    getValue() {\n      return this.nextAgValue\n    },\n    rowDataChange({ newData }) {\n      const { column } = this.params\n      const { colId } = column\n      this.agValue = newData[colId]\n    },\n    cellChange({ newValue, column }) {\n      if (column.colId === this.params.column.colId) {\n        this.agValue = newValue\n      }\n    },\n    triggerBlur(e) {\n      const { cellEditorComponentProps, ...restAgParams } = this.params || {}\n\n      const { blur } = cellEditorComponentProps || {}\n\n      blur?.({\n        event: e,\n        agParams: restAgParams\n      })\n    },\n    triggerFocus(e) {\n      const { cellEditorComponentProps, ...restAgParams } = this.params || {}\n\n      const { focus } = cellEditorComponentProps || {}\n\n      focus?.({\n        event: e,\n        agParams: restAgParams\n      })\n    },\n    triggerKeyup(e) {\n      const { cellEditorComponentProps, ...restAgParams } = this.params || {}\n\n      const { keyup } = cellEditorComponentProps || {}\n\n      keyup?.({\n        event: e,\n        agParams: restAgParams\n      })\n    },\n    triggerKeydown(e) {\n      const { cellEditorComponentProps, ...restAgParams } = this.params || {}\n      const { keydown } = cellEditorComponentProps || {}\n      keydown?.({\n        event: e,\n        agParams: restAgParams\n      })\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,mBAAmB;AAE3C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAEC,SAAS;MAClBC,WAAW,EAAED;IACf,CAAC;EACH,CAAC;EACDE,KAAK,EAAE;IACLH,OAAOA,CAAA,EAAG;MACR,IAAI,CAACE,WAAW,GAAG,IAAI,CAACF,OAAO;IACjC;EACF,CAAC;EACDI,OAAOA,CAAA,EAAG;IACR,MAAM;MAAEC;IAAK,CAAC,GAAG,IAAI,CAACC,MAAM;IAE5BD,IAAI,CAACE,gBAAgB,CAACT,OAAO,CAACU,kBAAkB,EAAE,IAAI,CAACC,aAAa,CAAC;IAErEJ,IAAI,CAACE,gBAAgB,CAACT,OAAO,CAACY,kBAAkB,EAAE,IAAI,CAACC,UAAU,CAAC;EACpE,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,MAAM;MAAEP;IAAK,CAAC,GAAG,IAAI,CAACC,MAAM;IAE5BD,IAAI,CAACQ,mBAAmB,CAACf,OAAO,CAACU,kBAAkB,EAAE,IAAI,CAACC,aAAa,CAAC;IAExEJ,IAAI,CAACQ,mBAAmB,CAACf,OAAO,CAACY,kBAAkB,EAAE,IAAI,CAACC,UAAU,CAAC;EACvE,CAAC;EACDG,OAAO,EAAE;IACP;IACAC,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAACb,WAAW;IACzB,CAAC;IACDO,aAAaA,CAAC;MAAEO;IAAQ,CAAC,EAAE;MACzB,MAAM;QAAEC;MAAO,CAAC,GAAG,IAAI,CAACX,MAAM;MAC9B,MAAM;QAAEY;MAAM,CAAC,GAAGD,MAAM;MACxB,IAAI,CAACjB,OAAO,GAAGgB,OAAO,CAACE,KAAK,CAAC;IAC/B,CAAC;IACDP,UAAUA,CAAC;MAAEQ,QAAQ;MAAEF;IAAO,CAAC,EAAE;MAC/B,IAAIA,MAAM,CAACC,KAAK,KAAK,IAAI,CAACZ,MAAM,CAACW,MAAM,CAACC,KAAK,EAAE;QAC7C,IAAI,CAAClB,OAAO,GAAGmB,QAAQ;MACzB;IACF,CAAC;IACDC,WAAWA,CAACC,CAAC,EAAE;MACb,MAAM;QAAEC,wBAAwB;QAAE,GAAGC;MAAa,CAAC,GAAG,IAAI,CAACjB,MAAM,IAAI,CAAC,CAAC;MAEvE,MAAM;QAAEkB;MAAK,CAAC,GAAGF,wBAAwB,IAAI,CAAC,CAAC;MAE/CE,IAAI,GAAG;QACLC,KAAK,EAAEJ,CAAC;QACRK,QAAQ,EAAEH;MACZ,CAAC,CAAC;IACJ,CAAC;IACDI,YAAYA,CAACN,CAAC,EAAE;MACd,MAAM;QAAEC,wBAAwB;QAAE,GAAGC;MAAa,CAAC,GAAG,IAAI,CAACjB,MAAM,IAAI,CAAC,CAAC;MAEvE,MAAM;QAAEsB;MAAM,CAAC,GAAGN,wBAAwB,IAAI,CAAC,CAAC;MAEhDM,KAAK,GAAG;QACNH,KAAK,EAAEJ,CAAC;QACRK,QAAQ,EAAEH;MACZ,CAAC,CAAC;IACJ,CAAC;IACDM,YAAYA,CAACR,CAAC,EAAE;MACd,MAAM;QAAEC,wBAAwB;QAAE,GAAGC;MAAa,CAAC,GAAG,IAAI,CAACjB,MAAM,IAAI,CAAC,CAAC;MAEvE,MAAM;QAAEwB;MAAM,CAAC,GAAGR,wBAAwB,IAAI,CAAC,CAAC;MAEhDQ,KAAK,GAAG;QACNL,KAAK,EAAEJ,CAAC;QACRK,QAAQ,EAAEH;MACZ,CAAC,CAAC;IACJ,CAAC;IACDQ,cAAcA,CAACV,CAAC,EAAE;MAChB,MAAM;QAAEC,wBAAwB;QAAE,GAAGC;MAAa,CAAC,GAAG,IAAI,CAACjB,MAAM,IAAI,CAAC,CAAC;MACvE,MAAM;QAAE0B;MAAQ,CAAC,GAAGV,wBAAwB,IAAI,CAAC,CAAC;MAClDU,OAAO,GAAG;QACRP,KAAK,EAAEJ,CAAC;QACRK,QAAQ,EAAEH;MACZ,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}