{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport componentConfig from './componentSpace.json';\nexport default {\n  props: {\n    showEditor: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      visible: this.showEditor,\n      spaceConfig: '',\n      componentStyle: ''\n    };\n  },\n  computed: {},\n  watch: {\n    showEditor(newVal, oldVal) {\n      this.visible = newVal;\n      var localStorageConfig = JSON.parse(localStorage.getItem('spaceStyle'));\n      if (localStorageConfig !== null) {\n        this.spaceConfig = localStorageConfig.saveConfig;\n        this.componentStyle = {\n          root: localStorageConfig.saveStyles\n        };\n        this.$emit('getComponentStyle', {\n          type: 'space',\n          saveStyles: this.componentStyle.root\n        });\n      } else {\n        this.spaceConfig = this.resetConfig(componentConfig);\n      }\n    }\n  },\n  mounted() {\n    var localStorageConfig = JSON.parse(localStorage.getItem('spaceStyle'));\n    if (localStorageConfig !== null) {\n      this.spaceConfig = localStorageConfig.saveConfig;\n    } else {\n      this.spaceConfig = this.resetConfig(componentConfig);\n    }\n  },\n  methods: {\n    resetConfig(spaceConfig) {\n      console.log(spaceConfig, '??????');\n      var config = JSON.parse(JSON.stringify(spaceConfig));\n      config.forEach(item => {\n        item.group.forEach(group => {\n          group.editorKey = '';\n          group.oldKey = group.curKey;\n        });\n      });\n      return config;\n    },\n    closeDrawer() {\n      this.$emit('ifEditor', 'space', false);\n    },\n    changeCurKey() {\n      this.componentStyle = this.getcss(this.spaceConfig);\n      this.$emit('getComponentStyle', {\n        type: 'space',\n        saveStyles: this.componentStyle.root\n      });\n    },\n    getcss(config) {\n      const result = {};\n      for (let i = 0; i < config.length; i++) {\n        const group = config[i].group;\n        for (let j = 0; j < group.length; j++) {\n          const curKey = group[j].curKey;\n          const cssVariables = group[j].cssVariable;\n          for (let k = 0; k < cssVariables.length; k++) {\n            if (curKey !== group[j].oldKey) {\n              result[cssVariables[k]] = curKey;\n            }\n          }\n        }\n      }\n      var root = '';\n      var ag = '';\n      for (const [key, value] of Object.entries(result)) {\n        if (key.startsWith('--ag')) {\n          ag += `${key}: ${value / 100}rem;`;\n        } else {\n          root += `${key}: ${value / 100}rem;`;\n        }\n      }\n      // 动态ag插入style\n      const el = document.getElementsByClassName('ag-theme-balham');\n      const agColor = localStorage.getItem('agColorStyle') != null ? localStorage.getItem('agColorStyle') : '';\n      const agStyle = ag + agColor;\n      for (let i = 0; i < el.length; i++) {\n        this.$nextTick(() => {\n          el[i].style = agStyle;\n        });\n      }\n      return {\n        root,\n        ag\n      };\n    },\n    saveCSS() {\n      if (this.componentStyle !== '') {\n        var saveConfig = this.spaceConfig;\n        var saveStyles = this.componentStyle.root;\n        var obj = {\n          saveStyles,\n          saveConfig\n        };\n        localStorage.setItem('spaceStyle', JSON.stringify(obj));\n        localStorage.setItem('agSpaceStyle', this.getcss(this.spaceConfig).ag);\n        this.$emit('getComponentStyle', {\n          type: 'space',\n          saveStyles\n        });\n      }\n      this.$emit('ifEditor', 'space', false);\n    },\n    downloadCss() {\n      var css = this.getcss(this.spaceConfig);\n      var cont = `\n     .spacing-name,\n     .ag-theme-balham.spacing-name {\n      // 此处spacing-name为紧凑名称\n        ${css.root}\n        ${css.ag}\n        &.var100,\n        &.var110,\n        &.var125,\n        &.var137,\n        &.var150 {\n            ${css.ag}\n          }\n      }`;\n      var aTag = document.createElement('a');\n      var blob = new Blob([cont]);\n      aTag.download = 'spaceStyle.scss';\n      aTag.href = URL.createObjectURL(blob);\n      aTag.click();\n      URL.revokeObjectURL(blob);\n    },\n    resetCss() {\n      this.componentStyle = '';\n      this.$emit('getComponentStyle', {\n        type: 'space',\n        saveStyles: this.componentStyle.root\n      });\n      this.spaceConfig = this.resetConfig(componentConfig);\n      window.localStorage.removeItem('spaceStyle');\n    }\n  }\n};","map":{"version":3,"names":["componentConfig","props","showEditor","type","Boolean","default","data","visible","spaceConfig","componentStyle","computed","watch","newVal","oldVal","localStorageConfig","JSON","parse","localStorage","getItem","saveConfig","root","saveStyles","$emit","resetConfig","mounted","methods","console","log","config","stringify","forEach","item","group","editorKey","oldKey","curKey","closeDrawer","changeCurKey","getcss","result","i","length","j","cssVariables","cssVariable","k","ag","key","value","Object","entries","startsWith","el","document","getElementsByClassName","agColor","agStyle","$nextTick","style","saveCSS","obj","setItem","downloadCss","css","cont","aTag","createElement","blob","Blob","download","href","URL","createObjectURL","click","revokeObjectURL","resetCss","window","removeItem"],"sources":["node_modules/@cndinfo/cube-design-web/src/components/ThemeEditor/src/editorSpace.vue"],"sourcesContent":["<template>\n  <cube-drawer\n    title=\"自定义布局紧凑\"\n    :visible=\"visible\"\n    :size=\"'20%'\"\n    :modal=\"true\"\n    custom-class=\"drawerEditor\"\n    @close=\"closeDrawer\"\n  >\n    <div class=\"drawerEditor-body\">\n      <el-row v-for=\"(item, index) in spaceConfig\" :key=\"index\">\n        <el-col class=\"editor-tit\">{{ item.groupName }}</el-col>\n        <el-form>\n          <el-form-item\n            v-for=\"(groupItem, groupIndex) in item.group\"\n            :key=\"groupIndex\"\n            :label=\"groupItem.name\"\n          >\n            <el-slider\n              v-model=\"groupItem.curKey\"\n              :min=\"groupItem.key[0]\"\n              :max=\"groupItem.key[1]\"\n              @change=\"changeCurKey\"\n            ></el-slider>\n          </el-form-item>\n        </el-form>\n      </el-row>\n    </div>\n    <div slot=\"footer\" class=\"drawerEditor-foot\">\n      <el-button\n        :disabled=\"componentStyle ==''\"\n        type=\"info\"\n        @click=\"downloadCss\"\n        >下载css文件</el-button\n      >\n      <div>\n        <el-button\n          :disabled=\"componentStyle == ''\"\n          type=\"primary\"\n          icon=\"el-icon-refresh-left\"\n          @click=\"resetCss\"\n          >复原</el-button\n        >\n        <el-button type=\"primary\" @click=\"saveCSS\">保存</el-button>\n      </div>\n    </div>\n  </cube-drawer>\n</template>\n<script>\nimport componentConfig from './componentSpace.json'\nexport default {\n  props: {\n    showEditor: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      visible: this.showEditor,\n      spaceConfig: '',\n      componentStyle: ''\n    }\n  },\n  computed: {},\n  watch: {\n    showEditor(newVal, oldVal) {\n      this.visible = newVal\n      var localStorageConfig = JSON.parse(localStorage.getItem('spaceStyle'))\n      if (localStorageConfig !== null) {\n        this.spaceConfig = localStorageConfig.saveConfig\n        this.componentStyle = {\n          root: localStorageConfig.saveStyles\n        }\n        this.$emit('getComponentStyle', {\n          type: 'space',\n          saveStyles: this.componentStyle.root\n        })\n      } else {\n        this.spaceConfig = this.resetConfig(componentConfig)\n      }\n    }\n  },\n  mounted() {\n    var localStorageConfig = JSON.parse(localStorage.getItem('spaceStyle'))\n    if (localStorageConfig !== null) {\n      this.spaceConfig = localStorageConfig.saveConfig\n    } else {\n      this.spaceConfig = this.resetConfig(componentConfig)\n    }\n  },\n  methods: {\n    resetConfig(spaceConfig) {\n      console.log(spaceConfig, '??????')\n      var config = JSON.parse(JSON.stringify(spaceConfig))\n      config.forEach((item) => {\n        item.group.forEach((group) => {\n          group.editorKey = ''\n          group.oldKey = group.curKey\n        })\n      })\n      return config\n    },\n    closeDrawer() {\n      this.$emit('ifEditor', 'space', false)\n    },\n    changeCurKey() {\n      this.componentStyle = this.getcss(this.spaceConfig)\n      this.$emit('getComponentStyle', {\n        type: 'space',\n        saveStyles: this.componentStyle.root\n      })\n    },\n    getcss(config) {\n      const result = {}\n      for (let i = 0; i < config.length; i++) {\n        const group = config[i].group\n        for (let j = 0; j < group.length; j++) {\n          const curKey = group[j].curKey\n          const cssVariables = group[j].cssVariable\n          for (let k = 0; k < cssVariables.length; k++) {\n            if (curKey !== group[j].oldKey) {\n              result[cssVariables[k]] = curKey\n            }\n          }\n        }\n      }\n      var root = ''\n      var ag = ''\n      for (const [key, value] of Object.entries(result)) {\n        if (key.startsWith('--ag')) {\n          ag += `${key}: ${value / 100}rem;`\n        } else {\n          root += `${key}: ${value / 100}rem;`\n        }\n      }\n      // 动态ag插入style\n      const el = document.getElementsByClassName('ag-theme-balham')\n      const agColor =\n        localStorage.getItem('agColorStyle') != null\n          ? localStorage.getItem('agColorStyle')\n          : ''\n      const agStyle = ag + agColor\n      for (let i = 0; i < el.length; i++) {\n        this.$nextTick(() => {\n          el[i].style = agStyle\n        })\n      }\n      return { root, ag }\n    },\n    saveCSS() {\n      if (this.componentStyle !== '') {\n        var saveConfig = this.spaceConfig\n        var saveStyles = this.componentStyle.root\n        var obj = {\n          saveStyles,\n          saveConfig\n        }\n        localStorage.setItem('spaceStyle', JSON.stringify(obj))\n        localStorage.setItem('agSpaceStyle', this.getcss(this.spaceConfig).ag)\n        this.$emit('getComponentStyle', {\n          type: 'space',\n          saveStyles\n        })\n      }\n      this.$emit('ifEditor', 'space', false)\n    },\n    downloadCss() {\n      var css = this.getcss(this.spaceConfig)\n      var cont = `\n     .spacing-name,\n     .ag-theme-balham.spacing-name {\n      // 此处spacing-name为紧凑名称\n        ${css.root}\n        ${css.ag}\n        &.var100,\n        &.var110,\n        &.var125,\n        &.var137,\n        &.var150 {\n            ${css.ag}\n          }\n      }`\n      var aTag = document.createElement('a')\n      var blob = new Blob([cont])\n      aTag.download = 'spaceStyle.scss'\n      aTag.href = URL.createObjectURL(blob)\n      aTag.click()\n      URL.revokeObjectURL(blob)\n    },\n    resetCss() {\n      this.componentStyle = ''\n      this.$emit('getComponentStyle', {\n        type: 'space',\n        saveStyles: this.componentStyle.root\n      })\n      this.spaceConfig = this.resetConfig(componentConfig)\n      window.localStorage.removeItem('spaceStyle')\n    }\n  }\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}