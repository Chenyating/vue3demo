{"ast":null,"code":"import Clipboard from 'clipboard';\n// import { MessageUtil } from '../../utils/tip'\nimport { MessageUtil } from '@cndinfo/cube-web-utils';\nif (!Clipboard) {\n  throw new Error('you should npm install `clipboard` --save at first ');\n}\n\n// 复制文本/标签\nconst copy = {\n  bind(el, binding) {\n    // console.log('bindel--', el)\n    // console.log('el.children--', el.children)\n    // console.log('el.children--', el.children[0].style)\n    let flagCopy = true;\n    if (el.className.indexOf('el-input') > -1 && el.children && el.children.length) {\n      if (el.children[0].disabled || el.children[0].readOnly) {\n        // el.children[0].style.cursor = 'move'\n        // el.children[0].className = 'cursor2'\n      } else {\n        flagCopy = false;\n      }\n    }\n    // 可复制DOM添加自定义鼠标样式\n    if (flagCopy && el.className.indexOf('cursor-copy') === -1) {\n      el.className += ' cursor-copy';\n    }\n    // console.log('binding.value--', binding.value)\n    // console.log('flagCopy--', flagCopy)\n    flagCopy && (el.onclick = function (e) {\n      const clipboard = new Clipboard(e.target, {\n        text: () => {\n          return binding.value || e.target.value || e.target.innerText;\n        }\n      });\n      clipboard.on('success', () => {\n        MessageUtil.success(this.$t('tips.duplicated'));\n        clipboard.off('error');\n        clipboard.off('success');\n        clipboard.destroy();\n      });\n      clipboard.on('error', () => {\n        MessageUtil.error(this.$t('grid.others.copyFailure'));\n        clipboard.off('error');\n        clipboard.off('success');\n        clipboard.destroy();\n      });\n      clipboard.onClick(e);\n    });\n  },\n  update(el, binding) {\n    // console.log('el--', el)\n    // console.log('el.children--', el.children)\n    // console.log('el.children--', el.children[0].style)\n    let flagCopy = true;\n    if (el.className.indexOf('el-input') > -1 && el.children && el.children.length) {\n      // console.log('el.children[0]--', el.children)\n      if (el.children[0].disabled || el.children[0].readOnly) {\n        // el.children[0].style.cursor = 'move'\n        // el.children[0].className = 'cursor2'\n      } else {\n        flagCopy = false;\n      }\n    }\n    // 可复制DOM添加自定义鼠标样式\n    if (flagCopy && el.className.indexOf('cursor-copy') === -1) {\n      el.className += ' cursor-copy';\n    }\n    // console.log('binding.value--', binding.value)\n    // console.log('flagCopy--', flagCopy)\n    flagCopy && (el.onclick = function (e) {\n      const clipboard = new Clipboard(e.target, {\n        text: () => {\n          return binding.value || e.target.value || e.target.innerText;\n        }\n      });\n      clipboard.on('success', () => {\n        MessageUtil.success(this.$t('tips.duplicated'));\n        clipboard.off('error');\n        clipboard.off('success');\n        clipboard.destroy();\n      });\n      clipboard.on('error', () => {\n        MessageUtil.error(this.$t('grid.others.copyFailure'));\n        clipboard.off('error');\n        clipboard.off('success');\n        clipboard.destroy();\n      });\n      clipboard.onClick(e);\n    });\n  }\n};\nexport default copy;","map":{"version":3,"names":["Clipboard","MessageUtil","Error","copy","bind","el","binding","flagCopy","className","indexOf","children","length","disabled","readOnly","onclick","e","clipboard","target","text","value","innerText","on","success","$t","off","destroy","error","onClick","update"],"sources":["/Users/myproject/vuedemo/node_modules/@cndinfo/cube-design-web/src/directives/copy/copy.js"],"sourcesContent":["import Clipboard from 'clipboard'\n// import { MessageUtil } from '../../utils/tip'\nimport { MessageUtil } from '@cndinfo/cube-web-utils'\n\nif (!Clipboard) {\n  throw new Error('you should npm install `clipboard` --save at first ')\n}\n\n// 复制文本/标签\nconst copy = {\n  bind(el, binding) {\n    // console.log('bindel--', el)\n    // console.log('el.children--', el.children)\n    // console.log('el.children--', el.children[0].style)\n    let flagCopy = true\n    if (el.className.indexOf('el-input') > -1 && el.children && el.children.length) {\n      if (el.children[0].disabled || el.children[0].readOnly) {\n        // el.children[0].style.cursor = 'move'\n        // el.children[0].className = 'cursor2'\n      } else {\n        flagCopy = false\n      }\n    }\n    // 可复制DOM添加自定义鼠标样式\n    if (flagCopy && el.className.indexOf('cursor-copy') === -1) {\n      el.className += ' cursor-copy'\n    }\n    // console.log('binding.value--', binding.value)\n    // console.log('flagCopy--', flagCopy)\n    flagCopy && (el.onclick = function(e) {\n      const clipboard = new Clipboard(e.target, {\n        text: () => {\n          return binding.value || e.target.value || e.target.innerText\n        }\n      })\n      clipboard.on('success', () => {\n        MessageUtil.success(this.$t('tips.duplicated'))\n        clipboard.off('error')\n        clipboard.off('success')\n        clipboard.destroy()\n      })\n      clipboard.on('error', () => {\n        MessageUtil.error(this.$t('grid.others.copyFailure'))\n        clipboard.off('error')\n        clipboard.off('success')\n        clipboard.destroy()\n      })\n      clipboard.onClick(e)\n    })\n  },\n  update(el, binding) {\n    // console.log('el--', el)\n    // console.log('el.children--', el.children)\n    // console.log('el.children--', el.children[0].style)\n    let flagCopy = true\n    if (el.className.indexOf('el-input') > -1 && el.children && el.children.length) {\n      // console.log('el.children[0]--', el.children)\n      if (el.children[0].disabled || el.children[0].readOnly) {\n        // el.children[0].style.cursor = 'move'\n        // el.children[0].className = 'cursor2'\n      } else {\n        flagCopy = false\n      }\n    }\n    // 可复制DOM添加自定义鼠标样式\n    if (flagCopy && el.className.indexOf('cursor-copy') === -1) {\n      el.className += ' cursor-copy'\n    }\n    // console.log('binding.value--', binding.value)\n    // console.log('flagCopy--', flagCopy)\n    flagCopy && (el.onclick = function(e) {\n      const clipboard = new Clipboard(e.target, {\n        text: () => {\n          return binding.value || e.target.value || e.target.innerText\n        }\n      })\n      clipboard.on('success', () => {\n        MessageUtil.success(this.$t('tips.duplicated'))\n        clipboard.off('error')\n        clipboard.off('success')\n        clipboard.destroy()\n      })\n      clipboard.on('error', () => {\n        MessageUtil.error(this.$t('grid.others.copyFailure'))\n        clipboard.off('error')\n        clipboard.off('success')\n        clipboard.destroy()\n      })\n      clipboard.onClick(e)\n    })\n  }\n}\n\nexport default copy\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,WAAW;AACjC;AACA,SAASC,WAAW,QAAQ,yBAAyB;AAErD,IAAI,CAACD,SAAS,EAAE;EACd,MAAM,IAAIE,KAAK,CAAC,qDAAqD,CAAC;AACxE;;AAEA;AACA,MAAMC,IAAI,GAAG;EACXC,IAAIA,CAACC,EAAE,EAAEC,OAAO,EAAE;IAChB;IACA;IACA;IACA,IAAIC,QAAQ,GAAG,IAAI;IACnB,IAAIF,EAAE,CAACG,SAAS,CAACC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAIJ,EAAE,CAACK,QAAQ,IAAIL,EAAE,CAACK,QAAQ,CAACC,MAAM,EAAE;MAC9E,IAAIN,EAAE,CAACK,QAAQ,CAAC,CAAC,CAAC,CAACE,QAAQ,IAAIP,EAAE,CAACK,QAAQ,CAAC,CAAC,CAAC,CAACG,QAAQ,EAAE;QACtD;QACA;MAAA,CACD,MAAM;QACLN,QAAQ,GAAG,KAAK;MAClB;IACF;IACA;IACA,IAAIA,QAAQ,IAAIF,EAAE,CAACG,SAAS,CAACC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;MAC1DJ,EAAE,CAACG,SAAS,IAAI,cAAc;IAChC;IACA;IACA;IACAD,QAAQ,KAAKF,EAAE,CAACS,OAAO,GAAG,UAASC,CAAC,EAAE;MACpC,MAAMC,SAAS,GAAG,IAAIhB,SAAS,CAACe,CAAC,CAACE,MAAM,EAAE;QACxCC,IAAI,EAAEA,CAAA,KAAM;UACV,OAAOZ,OAAO,CAACa,KAAK,IAAIJ,CAAC,CAACE,MAAM,CAACE,KAAK,IAAIJ,CAAC,CAACE,MAAM,CAACG,SAAS;QAC9D;MACF,CAAC,CAAC;MACFJ,SAAS,CAACK,EAAE,CAAC,SAAS,EAAE,MAAM;QAC5BpB,WAAW,CAACqB,OAAO,CAAC,IAAI,CAACC,EAAE,CAAC,iBAAiB,CAAC,CAAC;QAC/CP,SAAS,CAACQ,GAAG,CAAC,OAAO,CAAC;QACtBR,SAAS,CAACQ,GAAG,CAAC,SAAS,CAAC;QACxBR,SAAS,CAACS,OAAO,CAAC,CAAC;MACrB,CAAC,CAAC;MACFT,SAAS,CAACK,EAAE,CAAC,OAAO,EAAE,MAAM;QAC1BpB,WAAW,CAACyB,KAAK,CAAC,IAAI,CAACH,EAAE,CAAC,yBAAyB,CAAC,CAAC;QACrDP,SAAS,CAACQ,GAAG,CAAC,OAAO,CAAC;QACtBR,SAAS,CAACQ,GAAG,CAAC,SAAS,CAAC;QACxBR,SAAS,CAACS,OAAO,CAAC,CAAC;MACrB,CAAC,CAAC;MACFT,SAAS,CAACW,OAAO,CAACZ,CAAC,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC;EACDa,MAAMA,CAACvB,EAAE,EAAEC,OAAO,EAAE;IAClB;IACA;IACA;IACA,IAAIC,QAAQ,GAAG,IAAI;IACnB,IAAIF,EAAE,CAACG,SAAS,CAACC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAIJ,EAAE,CAACK,QAAQ,IAAIL,EAAE,CAACK,QAAQ,CAACC,MAAM,EAAE;MAC9E;MACA,IAAIN,EAAE,CAACK,QAAQ,CAAC,CAAC,CAAC,CAACE,QAAQ,IAAIP,EAAE,CAACK,QAAQ,CAAC,CAAC,CAAC,CAACG,QAAQ,EAAE;QACtD;QACA;MAAA,CACD,MAAM;QACLN,QAAQ,GAAG,KAAK;MAClB;IACF;IACA;IACA,IAAIA,QAAQ,IAAIF,EAAE,CAACG,SAAS,CAACC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;MAC1DJ,EAAE,CAACG,SAAS,IAAI,cAAc;IAChC;IACA;IACA;IACAD,QAAQ,KAAKF,EAAE,CAACS,OAAO,GAAG,UAASC,CAAC,EAAE;MACpC,MAAMC,SAAS,GAAG,IAAIhB,SAAS,CAACe,CAAC,CAACE,MAAM,EAAE;QACxCC,IAAI,EAAEA,CAAA,KAAM;UACV,OAAOZ,OAAO,CAACa,KAAK,IAAIJ,CAAC,CAACE,MAAM,CAACE,KAAK,IAAIJ,CAAC,CAACE,MAAM,CAACG,SAAS;QAC9D;MACF,CAAC,CAAC;MACFJ,SAAS,CAACK,EAAE,CAAC,SAAS,EAAE,MAAM;QAC5BpB,WAAW,CAACqB,OAAO,CAAC,IAAI,CAACC,EAAE,CAAC,iBAAiB,CAAC,CAAC;QAC/CP,SAAS,CAACQ,GAAG,CAAC,OAAO,CAAC;QACtBR,SAAS,CAACQ,GAAG,CAAC,SAAS,CAAC;QACxBR,SAAS,CAACS,OAAO,CAAC,CAAC;MACrB,CAAC,CAAC;MACFT,SAAS,CAACK,EAAE,CAAC,OAAO,EAAE,MAAM;QAC1BpB,WAAW,CAACyB,KAAK,CAAC,IAAI,CAACH,EAAE,CAAC,yBAAyB,CAAC,CAAC;QACrDP,SAAS,CAACQ,GAAG,CAAC,OAAO,CAAC;QACtBR,SAAS,CAACQ,GAAG,CAAC,SAAS,CAAC;QACxBR,SAAS,CAACS,OAAO,CAAC,CAAC;MACrB,CAAC,CAAC;MACFT,SAAS,CAACW,OAAO,CAACZ,CAAC,CAAC;IACtB,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAeZ,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}